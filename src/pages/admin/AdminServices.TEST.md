# سناریوهای تست صفحه مدیریت خدمات

## ✅ تست‌های عملکردی

### 1. بارگذاری و نمایش اولیه

**سناریو**: بارگذاری صفحه برای اولین بار

**مراحل**:
1. ورود به پنل ادمین
2. کلیک روی "مدیریت خدمات" در منوی سایدبار
3. صبر برای بارگذاری کامل صفحه

**نتیجه مورد انتظار**:
- ✓ 4 کارت آماری نمایش داده می‌شود
- ✓ تعداد کل خدمات = 7
- ✓ تعداد خدمات فعال = 7
- ✓ تعداد خدمات ویژه = 2
- ✓ جدول با 7 ردیف خدمت نمایش داده می‌شود
- ✓ خدمات بر اساس order مرتب شده‌اند

---

### 2. جستجو در خدمات

**سناریو 2.1**: جستجو بر اساس نام

**مراحل**:
1. در کادر جستجو "اسباب" را تایپ کنید
2. منتظر بمانید

**نتیجه مورد انتظار**:
- ✓ فقط خدمت "اسباب‌کشی سریع، مطمئن و آسان" نمایش داده می‌شود
- ✓ تعداد نتایج: 1

**سناریو 2.2**: جستجو بر اساس slug

**مراحل**:
1. در کادر جستجو "worker" را تایپ کنید

**نتیجه مورد انتظار**:
- ✓ 2 خدمت نمایش داده می‌شود: "کارگر" و "بسته‌بند یا فنی..."
- ✓ تعداد نتایج: 2

**سناریو 2.3**: جستجو بدون نتیجه

**مراحل**:
1. در کادر جستجو "xyz123" را تایپ کنید

**نتیجه مورد انتظار**:
- ✓ پیام "خدمتی یافت نشد" نمایش داده می‌شود
- ✓ جدول خالی است

---

### 3. فیلتر بر اساس وضعیت

**سناریو 3.1**: فیلتر خدمات فعال

**مراحل**:
1. از منوی Select فیلتر، "فعال" را انتخاب کنید

**نتیجه مورد انتظار**:
- ✓ همه 7 خدمت نمایش داده می‌شوند (چون همه فعال هستند)

**سناریو 3.2**: فیلتر خدمات ویژه

**مراحل**:
1. از منوی Select فیلتر، "ویژه" را انتخاب کنید

**نتیجه مورد انتظار**:
- ✓ فقط 2 خدمت نمایش داده می‌شود
- ✓ "اسباب‌کشی" و "کارگر" نمایش داده می‌شوند
- ✓ هر دو بج "ویژه" دارند

**سناریو 3.3**: ترکیب جستجو و فیلتر

**مراحل**:
1. "کارگر" را جستجو کنید
2. فیلتر را روی "ویژه" بگذارید

**نتیجه مورد انتظار**:
- ✓ فقط خدمت "کارگر" نمایش داده می‌شود
- ✓ تعداد: 1

---

### 4. افزودن خدمت جدید

**سناریو 4.1**: افزودن خدمت کامل

**مراحل**:
1. روی دکمه "افزودن خدمت جدید" کلیک کنید
2. در تب "اطلاعات پایه":
   - نام: "تست خدمت جدید"
   - Slug: "test-service"
   - آیکون: "🎯"
   - توضیحات کوتاه: "این یک تست است"
   - توضیحات کامل: "توضیحات کامل تست"
3. در تب "قیمت‌گذاری":
   - قیمت پایه: 1000000
   - قیمت هر کیلومتر: 10000
   - درصد تخفیف: 5
4. در تب "ویژگی‌ها":
   - افزودن 3 ویژگی
5. در تب "تنظیمات":
   - فعال: بله
   - ویژه: خیر
6. کلیک روی "افزودن خدمت"

**نتیجه مورد انتظار**:
- ✓ Toast موفقیت: "خدمت جدید با موفقیت افزوده شد"
- ✓ دیالوگ بسته می‌شود
- ✓ خدمت جدید در جدول نمایش داده می‌شود
- ✓ تعداد کل خدمات = 8

**سناریو 4.2**: افزودن خدمت بدون پر کردن فیلدهای اجباری

**مراحل**:
1. روی "افزودن خدمت جدید" کلیک کنید
2. بدون پر کردن فیلدها، روی "افزودن خدمت" کلیک کنید

**نتیجه مورد انتظار**:
- ✓ خدمت با مقادیر خالی ایجاد می‌شود (نیاز به validation دارد)
- ⚠️ در نسخه آینده باید validation اضافه شود

---

### 5. ویرایش خدمت

**سناریو 5.1**: ویرایش نام خدمت

**مراحل**:
1. روی منوی عملیات (⋮) خدمت "کارگر" کلیک کنید
2. "ویرایش" را انتخاب کنید
3. نام را به "کارگر حرفه‌ای" تغییر دهید
4. روی "ذخیره تغییرات" کلیک کنید

**نتیجه مورد انتظار**:
- ✓ Toast: "خدمت با موفقیت ویرایش شد"
- ✓ نام خدمت در جدول به‌روز شده است
- ✓ تاریخ updatedAt به‌روز شده است

**سناریو 5.2**: ویرایش قیمت‌گذاری

**مراحل**:
1. خدمت "خرده‌بار" را ویرایش کنید
2. در تب قیمت‌گذاری:
   - قیمت پایه: 1000000 (به جای 800000)
   - تخفیف: 15%
3. ذخیره کنید

**نتیجه مورد انتظار**:
- ✓ قیمت جدید در جدول نمایش داده می‌شود: "1.0 میلیون"
- ✓ بج تخفیف "15% تخفیف" نمایش داده می‌شود

**سناریو 5.3**: اضافه/حذف ویژگی

**مراحل**:
1. خدمتی را ویرایش کنید
2. در تب ویژگی‌ها، یک ویژگی جدید اضافه کنید
3. یک ویژگی موجود را حذف کنید
4. ذخیره کنید

**نتیجه مورد انتظار**:
- ✓ تغییرات ذخیره شده است
- ✓ در جزئیات خدمت، ویژگی‌های جدید نمایش داده می‌شوند

---

### 6. حذف خدمت

**سناریو 6.1**: حذف با تأیید

**مراحل**:
1. روی منوی عملیات خدمت "تست خدمت جدید" کلیک کنید
2. "حذف" را انتخاب کنید
3. در دیالوگ تأیید، روی "حذف" کلیک کنید

**نتیجه مورد انتظار**:
- ✓ Toast: "خدمت با موفقیت حذف شد"
- ✓ خدمت از جدول حذف شده است
- ✓ تعداد کل خدمات کاهش یافته است

**سناریو 6.2**: لغو حذف

**مراحل**:
1. روی حذف خدمتی کلیک کنید
2. در دیالوگ تأیید، روی "انصراف" کلیک کنید

**نتیجه مورد انتظار**:
- ✓ دیالوگ بسته می‌شود
- ✓ خدمت حذف نمی‌شود

---

### 7. تغییر وضعیت فعال/غیرفعال

**سناریو 7.1**: غیرفعال کردن خدمت

**مراحل**:
1. روی منوی عملیات خدمت "انبار" کلیک کنید
2. "غیرفعال کردن" را انتخاب کنید

**نتیجه مورد انتظار**:
- ✓ Toast: "وضعیت خدمت تغییر یافت"
- ✓ بج وضعیت تغییر می‌کند به "غیرفعال" با رنگ خاکستری
- ✓ در آمار، تعداد فعال 1 کمتر می‌شود

**سناریو 7.2**: فعال کردن دوباره

**مراحل**:
1. خدمت غیرفعال را انتخاب کنید
2. "فعال کردن" را بزنید

**نتیجه مورد انتظار**:
- ✓ بج به "فعال" تغییر می‌کند
- ✓ آمار به‌روز می‌شود

---

### 8. تغییر وضعیت ویژه

**سناریو 8.1**: افزودن به ویژه

**مراحل**:
1. خدمت "بسته‌بند" را انتخاب کنید (که ویژه نیست)
2. "افزودن به ویژه" را بزنید

**نتیجه مورد انتظار**:
- ✓ Toast: "وضعیت ویژه تغییر یافت"
- ✓ بج "ویژه" با بردر زرد نمایش داده می‌شود
- ✓ در آمار، تعداد ویژه 1 بیشتر می‌شود

**سناریو 8.2**: حذف از ویژه

**مراحل**:
1. خدمت ویژه را انتخاب کنید
2. "حذف از ویژه" را بزنید

**نتیجه مورد انتظار**:
- ✓ بج ویژه حذف می‌شود
- ✓ آمار به‌روز می‌شود

---

### 9. مشاهده جزئیات

**سناریو 9.1**: مشاهده جزئیات کامل

**مراحل**:
1. روی منوی عملیات "اسباب‌کشی" کلیک کنید
2. "مشاهده جزئیات" را انتخاب کنید

**نتیجه مورد انتظار**:
- ✓ دیالوگ جزئیات باز می‌شود
- ✓ اطلاعات Header نمایش داده می‌شود (آیکون، نام، slug، بج‌ها)
- ✓ 4 کارت آمار نمایش داده می‌شود
- ✓ توضیحات کامل نمایش داده می‌شود
- ✓ اطلاعات قیمت‌گذاری نمایش داده می‌شود
- ✓ لیست ویژگی‌ها نمایش داده می‌شود
- ✓ تاریخ ایجاد و بروزرسانی نمایش داده می‌شود

**سناریو 9.2**: بستن دیالوگ جزئیات

**مراحل**:
1. جزئیات را باز کنید
2. روی دکمه X یا خارج از دیالوگ کلیک کنید

**نتیجه مورد انتظار**:
- ✓ دیالوگ بسته می‌شود

---

### 10. آپلود تصویر

**سناریو 10.1**: آپلود تصویر جدید

**مراحل**:
1. خدمتی را ویرایش کنید
2. در تب "اطلاعات پایه"، در بخش تصویر روی "آپلود" کلیک کنید
3. یک تصویر انتخاب کنید
4. ذخیره کنید

**نتیجه مورد انتظار**:
- ✓ تصویر آپلود می‌شود (در حالت فعلی mockup)
- ✓ پیش‌نمایش تصویر نمایش داده می‌شود

**سناریو 10.2**: حذف تصویر

**مراحل**:
1. خدمت با تصویر را ویرایش کنید
2. روی دکمه حذف تصویر کلیک کنید

**نتیجه مورد انتظار**:
- ✓ تصویر حذف می‌شود
- ✓ فیلد imageUrl خالی می‌شود

---

### 11. ویژگی‌ها (Features Management)

**سناریو 11.1**: افزودن ویژگی جدید

**مراحل**:
1. در فرم افزودن/ویرایش، تب "ویژگی‌ها" را انتخاب کنید
2. روی "افزودن ویژگی" کلیک کنید
3. متن ویژگی را وارد کنید

**نتیجه مورد انتظار**:
- ✓ یک فیلد Input جدید اضافه می‌شود
- ✓ دکمه حذف برای فیلد جدید نمایش داده می‌شود

**سناریو 11.2**: حذف ویژگی

**مراحل**:
1. روی دکمه سطل زباله کنار ویژگی کلیک کنید

**نتیجه مورد انتظار**:
- ✓ ویژگی از لیست حذف می‌شود
- ✓ اگر فقط یک ویژگی باشد، دکمه حذف نمایش داده نمی‌شود

**سناریو 11.3**: پیش‌نمایش ویژگی‌ها

**مراحل**:
1. چند ویژگی وارد کنید

**نتیجه مورد انتظار**:
- ✓ در پایین فرم، باکس پیش‌نمایش نمایش داده می‌شود
- ✓ ویژگی‌های غیرخالی به صورت لیست bullet نمایش داده می‌شوند

---

### 12. Responsive Design

**سناریو 12.1**: نمایش در موبایل

**مراحل**:
1. صفحه را در حالت موبایل (375px) باز کنید

**نتیجه مورد انتظار**:
- ✓ کارت‌های آمار به صورت تک ستون نمایش داده می‌شوند
- ✓ فیلترها به صورت عمودی چیده می‌شوند
- ✓ جدول قابل اسکرول است
- ✓ فرم‌ها تک ستونه هستند

**سناریو 12.2**: نمایش در تبلت

**مراحل**:
1. صفحه را در حالت تبلت (768px) باز کنید

**نتیجه مورد انتظار**:
- ✓ کارت‌ها 2 ستونه نمایش داده می‌شوند
- ✓ فرم‌ها 2 ستونه هستند

---

### 13. محاسبات آماری

**سناریو**: صحت محاسبات

**بررسی**:
- ✓ کل خدمات = تعداد آیتم‌های services
- ✓ فعال = تعداد خدمات با isActive = true
- ✓ غیرفعال = کل - فعال
- ✓ ویژه = تعداد خدمات با isFeatured = true
- ✓ کل سفارشات = مجموع totalOrders همه خدمات
- ✓ کل درآمد = مجموع totalRevenue همه خدمات
- ✓ میانگین امتیاز = میانگین averageRating همه خدمات

---

### 14. مرتب‌سازی

**سناریو**: ترتیب صحیح خدمات

**بررسی**:
- ✓ خدمات بر اساس فیلد order مرتب شده‌اند
- ✓ order کوچکتر = بالاتر در لیست
- ✓ اگر order یکسان باشد، ترتیب ثابت است

---

### 15. Toast Notifications

**سناریوها**:
1. افزودن خدمت: ✓ "خدمت جدید با موفقیت افزوده شد"
2. ویرایش خدمت: ✓ "خدمت با موفقیت ویرایش شد"
3. حذف خدمت: ✓ "خدمت با موفقیت حذف شد"
4. تغییر وضعیت: ✓ "وضعیت خدمت تغییر یافت"
5. تغییر وضعیت ویژه: ✓ "وضعیت ویژه تغییر یافت"

**موقعیت**: top-center  
**نوع**: richColors  
**مدت زمان**: پیش‌فرض (4 ثانیه)

---

## 🐛 باگ‌های شناخته شده و محدودیت‌ها

### 1. Validation
- ⚠️ فیلدهای اجباری چک نمی‌شوند
- ⚠️ فرمت slug بررسی نمی‌شود
- ⚠️ اعداد منفی قابل ورود هستند

### 2. Backend
- ⚠️ داده‌ها از mock data می‌آیند
- ⚠️ تغییرات بعد از refresh از بین می‌روند
- ⚠️ آپلود تصویر واقعی پیاده‌سازی نشده

### 3. Performance
- ⚠️ فیلترینگ در هر render انجام می‌شود (نیاز به useMemo)
- ⚠️ برای لیست‌های بزرگ ممکن است کند شود

### 4. UX
- ⚠️ پیام تأیید برای تغییرات مهم (مثل تغییر وضعیت) وجود ندارد
- ⚠️ Loading state برای عملیات async وجود ندارد

---

## 📋 چک‌لیست تست کامل

### عملکرد پایه:
- [ ] بارگذاری صفحه
- [ ] نمایش آمار صحیح
- [ ] نمایش جدول
- [ ] جستجو
- [ ] فیلتر
- [ ] ترکیب جستجو و فیلتر

### CRUD:
- [ ] افزودن خدمت جدید
- [ ] ویرایش خدمت
- [ ] حذف خدمت
- [ ] تغییر وضعیت
- [ ] تغییر وضعیت ویژه

### فرم:
- [ ] تمام تب‌ها کار می‌کنند
- [ ] افزودن ویژگی
- [ ] حذف ویژگی
- [ ] آپلود تصویر
- [ ] ذخیره صحیح اطلاعات

### UI/UX:
- [ ] دیالوگ‌ها صحیح باز/بسته می‌شوند
- [ ] Toast ها نمایش داده می‌شوند
- [ ] بج‌ها رنگ‌بندی صحیح دارند
- [ ] Responsive در سایزهای مختلف

### جزئیات:
- [ ] نمایش کامل اطلاعات
- [ ] محاسبات صحیح آمار
- [ ] فرمت‌های عددی صحیح (فارسی)

### Edge Cases:
- [ ] جستجو بدون نتیجه
- [ ] حذف آخرین خدمت
- [ ] افزودن بدون ویژگی
- [ ] ویرایش و انصراف

---

**تاریخ تست**: 8 نوامبر 2025  
**نسخه**: 1.0.0  
**وضعیت**: ✅ آماده برای تست
