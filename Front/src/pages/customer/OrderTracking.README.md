# ุตูุญู ูพฺฏุฑ ูุญุธูโุง ุณูุงุฑุด - OrderTracking

## ููุง ฺฉู

ุตูุญู **ูพฺฏุฑ ูุญุธูโุง (Live Order Tracking)** ฺฉ ุตูุญู ุชูุงูโุตูุญู ู ุชุนุงูู ุจุฑุง ูุดุงูุฏู ูุถุนุช ูุญุธูโุง ุณูุงุฑุดุงุช ุฏุฑ ุญุงู ุงูุฌุงู ุงุณุช. ุงู ุตูุญู ุจู ูุดุชุฑ ุงูฺฉุงู ูโุฏูุฏ:
- ูููุนุช ุฏูู ุฑุงููุฏู ุฑุง ุฑู ููุดู ุจุจูุฏ
- ุจุง ุฑุงููุฏู ุชูุงุณ ุจฺฏุฑุฏ ุง ูพุงู ุจุฏูุฏ
- ูพุดุฑูุช ุณูุงุฑุด ุฑุง ุฏูุจุงู ฺฉูุฏ
- ุฒูุงู ุชุฎูู ุฑุณุฏู ุฑุง ูุดุงูุฏู ฺฉูุฏ

---

## ูฺฺฏโูุง ุงุตู

### 1๏ธโฃ **ููุดู ุชุนุงูู ุจุง ูููุนุช ุฒูุฏู** ๐บ๏ธ

#### ููุงุด ูููุนุชโูุง:
- **ููุทู ูุจุฏุง (ุณุจุฒ)**: ูุญู ุดุฑูุน ุจุง ุขฺฉูู Home
- **ุฑุงููุฏู (ุขุจ)**: ูููุนุช ูุนู ุจุง ุขฺฉูู Truck ู ุงููุดู Ping
- **ููุทู ููุตุฏ (ูุฑูุฒ)**: ูุญู ุชุญูู ุจุง ุขฺฉูู Building

#### ูฺฺฏโูุง ููุดู:
- **ุฎุท ูุณุฑ**: ููุงุด ูุณุฑ ุญุฑฺฉุช ุจุง Gradient ุฑูฺฏ
- **ุฌูุช ุญุฑฺฉุช**: ฺุฑุฎุด ุขฺฉูู ุฑุงููุฏู ุจุฑ ุงุณุงุณ heading
- **ุจุงุฏุฌ ูุงู ุฑุงููุฏู**: ููุงุด ูุงู ุจุงูุง ุขฺฉูู
- **ูุฌูุฏ**: ุฑุงูููุง ุฑูฺฏโูุง ุฏุฑ ฺฏูุดู
- **ุฏฺฉููโูุง Zoom**: ุฒูู In ู ุฒูู Out

#### ุงุทูุงุนุงุช ููุดู:
- ูุงุตูู ุชุง ููุตุฏ (Real-time)
- ุณุฑุนุช ูุนู ุฑุงููุฏู
- ุชุนุฏุงุฏ ุชูููโฺฏุงูโูุง

---

### 2๏ธโฃ **ุฒูุงู ุชุฎูู ุฑุณุฏู (ETA)** โฑ๏ธ

#### ูุญุงุณุจุงุช ููุดููุฏ:
```typescript
const calculateETA = () => {
  const distanceToDestination = 5.2; // ฺฉูููุชุฑ
  const averageSpeed = driverLocation.speed || 30;
  const timeInMinutes = Math.round((distanceToDestination / averageSpeed) * 60);
  return timeInMinutes;
};
```

#### ููุงุด:
- **ุนุฏุฏ ุจุฒุฑฺฏ**: ุฒูุงู ุจู ุฏููู (ุจุง ูููุช 4xl)
- **ุณุฑุนุช ูุนู**: km/h
- **ูพุดุฑูุช ุณูุฑ**: Progress Bar ุฏุฑุตุฏ

---

### 3๏ธโฃ **ุจุฑูุฒุฑุณุงู ุฎูุฏฺฉุงุฑ ูููุนุช** ๐

#### ุณุณุชู Update:
```typescript
useEffect(() => {
  const interval = setInterval(() => {
    setDriverLocation((prev) => ({
      lat: prev.lat + (Math.random() - 0.5) * 0.001,
      lng: prev.lng + (Math.random() - 0.5) * 0.001,
      heading: prev.heading + (Math.random() - 0.5) * 10,
      speed: Math.max(0, prev.speed + (Math.random() - 0.5) * 5),
      lastUpdate: new Date(),
    }));
  }, 5000); // ูุฑ 5 ุซุงูู
}, []);
```

#### ููุงุด:
- ุจุงุฏุฌ "ุฒูุฏู" ุฏุฑ ูุฏุฑ
- Alert ุจุง ุขฺฉูู Pulse
- ููุงุด ุขุฎุฑู ุฒูุงู ุจุฑูุฒุฑุณุงู
- ุงููุดู Ping ุฑู ุขฺฉูู ุฑุงููุฏู

---

### 4๏ธโฃ **ฺฉุงุฑุช ุงุทูุงุนุงุช ุฑุงููุฏู** ๐ค

#### ุงุทูุงุนุงุช ููุงุด ุฏุงุฏู ุดุฏู:
- **ุขูุงุชุงุฑ**: ุนฺฉุณ ูพุฑููุงู ุง ุญุฑู ุงูู ูุงู
- **ูุงู ู ูุงู ุฎุงููุงุฏฺฏ**: ูุงู ฺฉุงูู ุฑุงููุฏู
- **ุงูุชุงุฒ**: ุณุชุงุฑูโูุง ุทูุง (ูุซูุงู 4.8 โญ)
- **ุชุนุฏุงุฏ ุณูุฑูุง**: ฺฉู ุณูุฑูุง ุงูุฌุงู ุดุฏู (234 ุณูุฑ)
- **ูุฏู ูุณูู**: ูุณุงู ุชฺฉ ฺฉุงุจู ูุฏู 1401
- **ูพูุงฺฉ**: ุจุง Badge ู ูููุช Mono (ุช 123 ุจ 45)

#### ุฏฺฉููโูุง ุชุนุงูู:
- **ุชูุงุณ ุจุง ุฑุงููุฏู**: ุฏฺฉูู ุณุจุฒ ุจุง ุขฺฉูู Phone
- **ุงุฑุณุงู ูพุงู**: ุฏฺฉูู Outline ุจุง ุขฺฉูู MessageSquare

---

### 5๏ธโฃ **ุชุงูโูุงู ูุถุนุช ุณูุงุฑุด** ๐

#### ูุฑุงุญู ุณูุงุฑุด:
1. **ุซุจุช ุณูุงุฑุด** โ - ุชฺฉูู ุดุฏู
2. **ุชุงุฏ ุณูุงุฑุด** โ - ุชฺฉูู ุดุฏู
3. **ุงุฎุชุตุงุต ุฑุงููุฏู** โ - ุชฺฉูู ุดุฏู
4. **ุฑุงููุฏู ุฏุฑ ูุณุฑ** ๐ต - ุฏุฑ ุญุงู ุงูุฌุงู (ุจุง Pulse)
5. **ุชุญูู ุจุงุฑ** โณ - ุฏุฑ ุงูุชุธุงุฑ

#### ูฺฺฏโูุง:
- ุขฺฉููโูุง ูุนูุงุฏุงุฑ ุจุฑุง ูุฑ ูุฑุญูู
- ุฑูฺฏโุจูุฏ (ุณุจุฒ: ุชฺฉููุ ุขุจ: ูุนุงูุ ุฎุงฺฉุณุชุฑ: ุงูุชุธุงุฑ)
- ููุงุด ุชุงุฑุฎ ู ุณุงุนุช ุฏูู
- Badge "ุฏุฑ ุญุงู ุงูุฌุงู" ุจุฑุง ูุฑุญูู ูุนู
- ุงููุดู Pulse ุจุฑุง ูุฑุญูู ูุนู
- ูุงุจูุช ุฌูุน ุดุฏู (Collapse)

---

### 6๏ธโฃ **ุฌุฒุฆุงุช ฺฉุงูู ุณูุงุฑุด** ๐

#### ุขุฏุฑุณโูุง:
- ฺฉุงุฑุช ูุจุฏุง ุจุง ุขฺฉูู ุณุจุฒ
- ููุด ุฌูุช ุฏุงุฑ
- ฺฉุงุฑุช ููุตุฏ ุจุง ุขฺฉูู ูุฑูุฒ

#### ุงุทูุงุนุงุช ุฎุฏูุงุช:
- ููุน ูุณูู (ูุงูุชุ ูุณุงูุ ฺฉุงููู)
- ุชุนุฏุงุฏ ฺฉุงุฑฺฏุฑ (1ุ 2ุ 3 ููุฑ)
- ุชุงุฑุฎ ู ุฒูุงู ุณูุงุฑุด
- ููุช ุชุฎูู

#### ุดูุงุฑู ุณูุงุฑุด:
- ููุงุด ุฏุฑ ฺฉุงุฏุฑ ูุฎุตูุต
- ูููุช Mono ุจุฑุง ุฎูุงูุง
- ุฑูฺฏ Primary

---

### 7๏ธโฃ **ุงูฺฉุงูุงุช ุงุถุทุฑุงุฑ** ๐จ

#### ุจุฎุด ุงููุช (ฺฉุงุฑุช ูุฑูุฒ):
- **ฺฏุฒุงุฑุด ูุดฺฉู**: ุฏุงููฺฏ ุจุง ูุฑู ฺฏุฒุงุฑุด
- **ุชูุงุณ ุงุถุทุฑุงุฑ**: ุฏฺฉูู ูุฑูุฒ ุจุฑุง ููุงุฑุฏ ุงูุฑฺุงูุณ
- **ุฏุงูููุฏ ุฑุณุฏ**: ุฏุฑุงูุช PDF ุฑุณุฏ ุณูุงุฑุด

#### ุฏุงููฺฏ ฺฏุฒุงุฑุด ูุดฺฉู:
- ุชูุถุญุงุช ูุดฺฉู
- Alert ุดูุงุฑู ูพุดุชุจุงู
- ุฏฺฉูู ุงุฑุณุงู

#### ุฏุงููฺฏ ุฏุงูููุฏ ุฑุณุฏ:
- ูพุดโููุงุด ุฑุณุฏ
- ุดูุงุฑู ุณูุงุฑุด
- ุชุงุฑุฎ ู ูุจูุบ
- ุฏฺฉูู ุฏุงูููุฏ PDF

---

### 8๏ธโฃ **ุฑุงูููุง ุณุฑุน** ๐

#### ูฺฉุงุช ฺฉุงุฑุจุฑุฏ:
โ ูููุนุช ุฑุงููุฏู ูุฑ 5 ุซุงูู ุจูโุฑูุฒุฑุณุงู ูโุดูุฏ
โ ูโุชูุงูุฏ ุฏุฑ ูุฑ ุฒูุงู ุจุง ุฑุงููุฏู ุชูุงุณ ุจฺฏุฑุฏ
โ ุฒูุงู ุฑุณุฏู ุจู ุตูุฑุช ุฎูุฏฺฉุงุฑ ูุญุงุณุจู ูโุดูุฏ
โ ุจุฑุง ูุฑฺฏููู ูุดฺฉู ุจุง ูพุดุชุจุงู ุชูุงุณ ุจฺฏุฑุฏ
โ ูพุณ ุงุฒ ุชุญูู ุจุงุฑุ ุงูุชุงุฒ ุฎูุฏ ุฑุง ุซุจุช ฺฉูุฏ

---

### 9๏ธโฃ **ุฏฺฉููโูุง ุนููุงุช** ๐ฏ

#### ุฏุฑ ูุฏุฑ:
- **ุงุดุชุฑุงฺฉโฺฏุฐุงุฑ**: ฺฉูพ ููฺฉ ูพฺฏุฑ
- **ุจุฑูุฒุฑุณุงู**: ุฑูุฑุด ุงุทูุงุนุงุช (ุจุง ุงููุดู Spin)

#### ุฏุฑ ุจุฏูู:
- **ูพฺฏุฑ ูุญุธูโุง**: ุฏฺฉูู ุงุตู
- **ุชูุงุณ ุจุง ุฑุงููุฏู**: ุฏฺฉูู ุณุจุฒ
- **ุงุฑุณุงู ูพุงู**: ุฏฺฉูู Outline
- **ุจุงุฒฺฏุดุช ุจู ุณูุงุฑุดุงุช**: ููฺฉ ุฏุฑ ุงูุชูุง

---

## ุณุงุฎุชุงุฑ State

### States ุงุตู:
```typescript
const [order, setOrder] = useState<Order>(mockOrder);
const [driver, setDriver] = useState(mockDriver);
const [showDetails, setShowDetails] = useState(true);
const [isRefreshing, setIsRefreshing] = useState(false);
const [driverLocation, setDriverLocation] = useState<DriverLocation>({
  lat: 35.6950,
  lng: 51.3950,
  heading: 45,        // ุฌูุช ุญุฑฺฉุช
  speed: 35,          // ุณุฑุนุช
  lastUpdate: new Date(),
});
```

### Interface DriverLocation:
```typescript
interface DriverLocation {
  lat: number;              // ุนุฑุถ ุฌุบุฑุงูุง
  lng: number;              // ุทูู ุฌุบุฑุงูุง
  heading: number;          // ุฌูุช ุญุฑฺฉุช (0-360 ุฏุฑุฌู)
  speed: number;            // ุณุฑุนุช (ฺฉูููุชุฑ ุฏุฑ ุณุงุนุช)
  lastUpdate: Date;         // ุขุฎุฑู ุจุฑูุฒุฑุณุงู
}
```

---

## Mock Data

### ุณูุงุฑุด ููููู:
```typescript
const mockOrder: Order = {
  id: '1',
  status: OrderStatus.IN_PROGRESS,
  distanceKm: 12,
  estimatedDuration: 45,
  // ...
};
```

### ุฑุงููุฏู ููููู:
```typescript
const mockDriver = {
  id: 'd1',
  name: 'ุนู ูุญูุฏ',
  phone: '09121111111',
  rating: 4.8,
  totalTrips: 234,
  vehicleModel: 'ูุณุงู ุชฺฉ ฺฉุงุจู ูุฏู 1401',
  vehiclePlate: 'ุช 123 ุจ 45',
};
```

---

## Functions ฺฉูุฏ

### 1. ูุญุงุณุจู ETA:
```typescript
const calculateETA = () => {
  const distanceToDestination = 5.2;
  const averageSpeed = driverLocation.speed || 30;
  const timeInMinutes = Math.round((distanceToDestination / averageSpeed) * 60);
  return timeInMinutes;
};
```

### 2. ูุญุงุณุจู ูพุดุฑูุช:
```typescript
const calculateProgress = () => {
  // ูุญุงุณุจู ุจุฑ ุงุณุงุณ ูุณุงูุช ุท ุดุฏู
  return 60; // ุฏุฑุตุฏ
};
```

### 3. ุฑูุฑุด ุงุทูุงุนุงุช:
```typescript
const handleRefresh = () => {
  setIsRefreshing(true);
  toast.success('ุงุทูุงุนุงุช ุจูโุฑูุฒุฑุณุงู ุดุฏ');
  setTimeout(() => setIsRefreshing(false), 1000);
};
```

---

## ุทุฑุงุญ UI/UX

### ุฑูฺฏโุจูุฏ:
- **ูุจุฏุง**: ุณุจุฒ (#10b981)
- **ุฑุงููุฏู**: ุขุจ Primary
- **ููุตุฏ**: ูุฑูุฒ (#ef4444)
- **ูุณุฑ**: Gradient ุณุจุฒ ุจู ุขุจ
- **ูุดุฏุงุฑ**: ูุฑูุฒ/ูุงุฑูุฌ

### ุงููุดูโูุง:
- **Ping**: ุฏุงุฑู ูพุงูุณ ุฑู ุฑุงููุฏู
- **Pulse**: Badge ุฒูุฏู ู ูุฑุญูู ูุนู
- **Spin**: ุฏฺฉูู ุฑูุฑุด
- **Transition**: ุญุฑฺฉุช ุฑุงููุฏู ุฑู ููุดู

### Responsive:
- Grid: lg:grid-cols-3
- ููุดู: aspect-video
- ฺฉุงุฑุชโูุง: Stack ุฏุฑ ููุจุงู

---

## Toast Messages

### ูพุงูโูุง ููููุช:
- "ุงุทูุงุนุงุช ุจูโุฑูุฒุฑุณุงู ุดุฏ"
- "ููฺฉ ูพฺฏุฑ ฺฉูพ ุดุฏ"
- "ุงูุชุงุฒ ุดูุง ุซุจุช ุดุฏ"

### ูพุงูโูุง ุงุทูุงุนุงุช:
- "ุฏุฑ ุญุงู ุจุฑูุฑุงุฑ ุชูุงุณ ุจุง ุฑุงููุฏู..."
- "ูพุงู ุดูุง ุจุฑุง ุฑุงููุฏู ุงุฑุณุงู ุดุฏ"

### ูพุงูโูุง ุฎุทุง:
- "ุชูุงุณ ุจุง ูพุดุชุจุงู ุงุถุทุฑุงุฑ..."

---

## Accessibility

### ARIA Labels:
- ุฏฺฉููโูุง ุจุง Label ูุงุถุญ
- ุขฺฉููโูุง ุจุง ุชูุถุญุงุช

### Keyboard Navigation:
- ุชูุงู ุฏฺฉููโูุง ูุงุจู ุฏุณุชุฑุณ ุจุง Tab
- ุฏุงููฺฏโูุง ุจุง Escape ุจุณุชู ูโุดููุฏ

### Screen Readers:
- ูุชูโูุง ุฌุงฺฏุฒู ุจุฑุง ุขฺฉููโูุง
- ุชูุถุญุงุช ุจุฑุง ูุถุนุชโูุง

---

## Performance

### Optimization:
- ููุงุฏุฑ State ฺฉููู
- useEffect ุจุง Cleanup
- Interval ุจุง clearInterval
- Lazy Loading ุจุฑุง ููุดู

### Update Frequency:
- ูููุนุช: ูุฑ 5 ุซุงูู
- ETA: Real-time calculation
- Progress: ูุญุงุณุจู ูุญุธูโุง

---

## ุงูฺฉุงูุงุช ุขูุฏู

ูพุดููุงุฏุงุช ุจุฑุง ูุณุฎูโูุง ุจุนุฏ:

- [ ] ููุดู ูุงูุน (Google Maps / Neshan)
- [ ] ฺุช ุฒูุฏู ุจุง ุฑุงููุฏู
- [ ] ูุฏู ฺฉุงู ุจุง ุฑุงููุฏู
- [ ] ุงุนูุงู Push ุจุฑุง ุชุบุฑ ูุถุนุช
- [ ] ูพุฎุด ุตุฏุง ููฺฏุงู ูุฒุฏฺฉ ุดุฏู
- [ ] ุชุงุฑุฎฺู ุญุฑฺฉุช ุฑุงููุฏู
- [ ] ููุงุด ุชุฑุงูฺฉ ุฑู ูุณุฑ
- [ ] ุชุบุฑ ูุณุฑ ุชูุณุท ุฑุงููุฏู
- [ ] ุงุดุชุฑุงฺฉโฺฏุฐุงุฑ ููฺฉ ูพฺฏุฑ ุจุง ุฏูุณุชุงู
- [ ] ุถุจุท ูุฏู ุงุฒ ุณูุฑ (Dashcam)
- [ ] ูุงุจูุช ุชุบุฑ ููุตุฏ ุฏุฑ ุญู ุณูุฑ
- [ ] ูพุฑุฏุงุฎุช ุงูุนุงู ุจู ุฑุงููุฏู
- [ ] ุฑุฒุฑู ุฑุงููุฏู ุจุฑุง ุณูุฑูุง ุจุนุฏ
- [ ] ุงุฏุขูุฑ ูุจู ุงุฒ ุฑุณุฏู ุฑุงููุฏู

---

## Integration ุจุง Backend

### WebSocket ุจุฑุง Live Updates:
```typescript
// ูุซุงู ุงุชุตุงู WebSocket
const ws = new WebSocket('wss://api.baharbarbari.ir/tracking');

ws.onmessage = (event) => {
  const data = JSON.parse(event.data);
  setDriverLocation({
    lat: data.latitude,
    lng: data.longitude,
    heading: data.heading,
    speed: data.speed,
    lastUpdate: new Date(data.timestamp),
  });
};
```

### API Endpoints:
```
GET  /api/orders/{orderId}/tracking
POST /api/orders/{orderId}/contact-driver
POST /api/orders/{orderId}/report-issue
GET  /api/orders/{orderId}/receipt
```

---

## Testing

### Test Cases:
1. ููุงุด ุตุญุญ ูููุนุช ุฑุงููุฏู
2. ูุญุงุณุจู ุฏูู ETA
3. ุจุฑูุฒุฑุณุงู ูุฑ 5 ุซุงูู
4. ุชูุงุณ ุจุง ุฑุงููุฏู
5. ุงุฑุณุงู ูพุงู
6. ุฏุงูููุฏ ุฑุณุฏ
7. ฺฏุฒุงุฑุด ูุดฺฉู
8. ููุงุด ุชุงูโูุงู
9. Responsive ุฏุฑ ููุจุงู
10. ุนููฺฉุฑุฏ ุฏฺฉููโูุง

---

## ูุฌูุฒ

ุงู ูุงู ุจุฎุด ุงุฒ ูพุฑูฺู ุจุงุฑุจุฑ ุจูุงุฑ ุงุณุช.
ยฉ 2024 All Rights Reserved.
