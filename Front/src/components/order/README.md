# سیستم فرم ثبت سفارش چندمرحله‌ای

این پوشه شامل کامپوننت‌های فرم ثبت سفارش باربری بهار است.

## ساختار فرم

فرم ثبت سفارش شامل ۸ مرحله است که به صورت داینامیک بر اساس نوع خدمت انتخابی تغییر می‌کند:

### مراحل:

1. **ServiceSelectionStep**: انتخاب نوع خدمت (اسباب‌کشی، کارگر، بسته‌بند، ...)
2. **PackingStep**: آیا نیاز به بسته‌بندی دارید؟
   - انتخاب نوع بسته‌بندی
   - انتخاب آیتم‌های مورد نیاز بسته‌بندی
   - تعداد کارگران (مرد/زن)
   - مدت زمان بسته‌بندی
   - نیاز به مواد بسته‌بندی

3. **HeavyItemsStep**: انتخاب وسایل سنگین (یخچال ساید، پیانو، گاوصندوق، ...)
4. **FloorDetailsStep**: 
   - طبقه مبدا و وجود آسانسور
   - طبقه مقصد و وجود آسانسور
   - مسافت پیاده‌روی تا محل پارک

5. **WorkerVehicleStep**: 
   - تعداد کارگر (۴-۸ نفر)
   - نوع خودرو (وانت، نیسان، کامیون، خاور)

6. **AddressStep**: وارد کردن آدرس مبدا و مقصد با جزئیات کامل
7. **DateTimeStep**: انتخاب تاریخ و ساعت مورد نظر
8. **SummaryStep**: خلاصه سفارش، قیمت نهایی، کد تخفیف و ثبت نهایی

## کامپوننت‌های کمکی:

- **StepIndicator**: نشان‌دهنده پیشرفت در مراحل فرم
- **PriceBreakdownCard**: نمایش جزئیات محاسبه قیمت در sidebar
- **QuickPriceEstimator**: برآورد سریع قیمت در صفحات دیگر

## محاسبه قیمت

محاسبه قیمت به صورت خودکار در `OrderFormContext` انجام می‌شود و شامل موارد زیر است:

1. هزینه پایه خودرو (بر اساس نوع)
2. هزینه طبقه (بدون آسانسور)
3. هزینه مسافت پیاده‌روی
4. هزینه بسته‌بندی (کارگر × ساعت × نرخ)
5. هزینه وسایل سنگین
6. هزینه مسافت اضافی (بیش از ۱۰ کیلومتر)
7. هزینه مواد بسته‌بندی

## استفاده

```tsx
import { OrderFormPage } from './pages/public/OrderFormPage';

// در Route:
<Route path="/order/:serviceSlug" element={<OrderFormPage />} />
```

## Context

فرم از `OrderFormContext` استفاده می‌کند که باید در سطح بالاتر (App) wrap شود:

```tsx
<OrderFormProvider>
  <Routes>
    ...
  </Routes>
</OrderFormProvider>
```

## Features

- ✅ فرم چندمرحله‌ای با validation
- ✅ محاسبه قیمت لحظه‌ای
- ✅ نمایش جزئیات قیمت در sidebar
- ✅ داینامیک بودن بر اساس نوع خدمت
- ✅ ذخیره state در Context
- ✅ قابلیت بازگشت به مراحل قبل
- ✅ طراحی ریسپانسیو
- ✅ فونت فارسی ایران‌سنس
- ✅ راست‌چین

## TODO (برای Production)

- [ ] اتصال به API backend
- [ ] پیاده‌سازی نقشه نشان برای انتخاب آدرس
- [ ] محاسبه مسافت واقعی با استفاده از نقشه
- [ ] اعتبارسنجی کد تخفیف
- [ ] اتصال درگاه پرداخت زرین‌پال
- [ ] ارسال SMS تایید
- [ ] پیگیری سفارش با Live Location
